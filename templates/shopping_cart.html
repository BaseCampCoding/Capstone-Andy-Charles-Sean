{% extends 'index.html' %}

{% block content %}
<style>
.product-image { float: left; width: 25%; margin-right: 20px; color:rgb(255, 255, 255)}
.product-details { float: left; width: 44%; }
.product-removal { float: left; width: 18%; text-align: center;}
.product-price { float: left; width: 10%; text-align: center; margin-left: 10px !important;}
.product-quantity { float: left; width: 1%; }
.product-line-price { float: left; width: 1%; text-align: center; }


/* This is used as the traditional .clearfix class */
.group:before,
.group:after {
    content: '';
    display: table;
}

.group:after {
    clear: both;
}

/* Apply dollar signs */
.product .product-price:before, .product .product-line-price:before, .totals-value:before {
  content: '$';
}

/* Body/Header stuff */
h1 {
  font-weight: 100;
  margin-bottom: 1rem;
}

label {
  color: #aaa;
  margin-right: 1px;
}

.shopping-cart {
  display: flex;
  flex-direction: column;
  margin-top: -32px;
}


/* Product entries */
.product {
  margin-bottom: 20px;  
  border-top: .5px solid grey;
  margin-right: -20px !important;
  background-color: rgb(236, 236, 236);
}

.product .product-image {
  text-align: center;
}

.product-details .product-description {
  margin: 5px 20px 5px 0;
  line-height: 1.4em;
}

.product-price-detail {
  float: left; width: 10%;
  text-align: center;
  font-weight: bolder;
  margin-top: 10px;
}

.product-quantity input {
    width: 40px;
}

.remove-product {
  border: 0;
  padding: 4px 8px;
  background-color: #c66;
  color: #fff;
  font-family: 'HelveticaNeue-Medium', 'Helvetica Neue Medium';
  font-size: 12px;
  border-radius: 3px;
  margin-left: -25px !important;
  margin-top: 10px;
}

.remove-product:hover {
  background-color: #a44;
}

.totals .totals-item {
  float: right;
  clear: both;
  width: 100%;
  margin-left: px;  
}

.totals label {
  float: left;
  clear: both;
  width: 95%;
  text-align: right;
}

.totals .totals-value {
  float: right;
  width: 50%;
  text-align: right;
  margin-right: 15px;
}

.checkout {
  display: flex;
  justify-content: flex-end;
  border: 0;
  margin: 0 10px 15px 9.7rem;
  padding: 3px 10px;
  background-color: #6b6;
  color: #fff;
  font-size: 23px;
  border-radius: 3px;
  text-decoration: none;
}

.checkout:hover {
  background-color: #494;
  color: #fff;
}

.wrapper {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: 5px;
  grid-auto-rows: minmax(100px, auto);
}

.one {
  margin-left: 10px;
  grid-column: 1 / 8;
  grid-row: 1;
}

.two {
  margin-left: 30px;
  grid-column: 8 / 10;
  grid-row: 1;
  background-color: rgb(236, 236, 236);
}

</style>
<body>
<div class="wrapper">
  <div class="one">
    <h1>Shopping Cart</h1>
    <div class="shopping-cart">
      <div class="column-labels">
        <label class="product-image">Image</label>
        <label class="product-details">Product</label>
        <label class="product-removal">Remove</label>
        <label class="product-price">Price</label>
        <!-- <label class="product-quantity">Quantity</label> -->
        <!-- <label class="product-line-price">Total</label> -->
      </div>
      {% for post in shopping_cart_list %}
      <div class="product">
        <div class="product-image">
            <a href="{% url 'post_detail' post.pk %}"><img class="card-img-top" src="{{ post.image.url }}" ></a>
        </div>
        <div class="product-details">
          <div class="product-title">{{ post.item }}</div>
          <p class="product-description">{{ post.description }}</p>
        </div>
        <!-- <div class="product-quantity">
          <input type="number" value="1" min="1">
        </div> -->
        <div class="product-removal">
          <button class="remove-product">
            Remove
          </button>
        </div>
        <div class="product-price-detail">${{ post.price }}</div>
        <!-- <div class="product-line-price">{{ post.price }}</div> -->
      </div>
      {% empty %}
        <div>
            <h3>Your cart is empty</h3>
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="two">
    <div class="totals">
      <div class="totals-item">
        <label>Subtotal</label>
        <div class="totals-value" id="cart-subtotal">90.7</div>
      </div>
      <div class="totals-item totals-item-total">
        <label>Grand Total</label>
        <div class="totals-value" id="cart-total">90.57</div>
      </div>
    </div>
      <a href="{% url 'checkout' %}" class="checkout">Checkout</a>
  </div>
</div>
</body>

<script>
var taxRate = 0.05;
var shippingRate = 15.00; 
var fadeTime = 300;

/* Assign actions */
let remove = document.querySelector('.product-removal button')
remove.click( function() {
  removeItem(this);
});

/* Remove item from cart */
function removeItem(removeButton) {
  /* Remove row from DOM and recalc cart total */
  var productRow = $(removeButton).parent().parent();
  productRow.slideUp(fadeTime, function() {
    productRow.remove();
  });
}
</script>

{% endblock content %}