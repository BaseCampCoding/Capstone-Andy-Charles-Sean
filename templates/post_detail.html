{% extends 'index.html' %}
{% load static %}

{% block title %}Detail Page{% endblock title %}

{% block content %}
{% if user.is_authenticated %}
  <div class="item-detail-wrapper">
    <div class="one">
      <img class="float-left" src="{{ post.image.url }}" style="width:100%; height: auto;">
    </div>
    <div class="two">
      <h2 class="float-right">{{ post.item }}</h2>
      <p>${{ post.price }}</p>
      <p class="font-weight-bold">Seller: <span >{{ post.seller }}</span></p>
      <hr>
      <ul>
        <li class="card-text">{{ post.description }}</li>
      </ul>
    </div>
    <div class="cart">
      {% if cart %}
        <a class="remove-cart" href="{% url 'shopping' object.pk %}" style="float: right;">
          Remove
        </a>
      {% else %}
        <a class="add-cart" href="{% url 'shopping' object.pk %}" style="float: right; padding-right: 5%;">
          Add to Cart
        </a>
      {% endif %}
    </div>
    {% if post.seller == user %}
        <div class="edit-delete">
            <a class="edit"href="{% url 'post_edit' post.pk %}">Edit</a>
            <a class="delete" href="{% url 'post_delete' post.pk %}">Delete</a>
        </div>
    {% endif %}
    <div class="favorite">
      {% if favorite %}
        <a href="{% url 'favorite_post' post.pk %}">
          <i class="fas fa-2x fa-star star"></i>
        </a>
      {% else %}
        <a href="{% url 'favorite_post' post.pk %}">
          <i class="far fa-2x fa-star star"></i>
        </a>
      {% endif %}
    </div>
    <div class="card-footer review">
      <a href="{% url 'review_new' post.pk %}">Leave a review</a>
      {% for review in post.reviews.all %}
        <p>
            <span class="font-weight-bold">
                {{ review.author }} &middot;
            </span>
            {{ review }}
        </p>
      {% endfor %}
    </div>
    <br>
    <div class="three">
      <h3 style="text-align: center;">Related Items</h3>
      <div class="card-deck">
        {% for item in related_items %}
          <div class="card post-entry" style="width: 18rem;">
              <a class="messUp" href="{% url 'post_detail' item.pk %}"><img src="{{ item.image.url }}" style="width:100%"></a>
              <div class="container">
                  <p><b>{{ item }}</b></p>
                  <p>$ {{ item.price }}</p>
                  <p> {{ item.seller }}</p>
              </div>
          </div>
        {% endfor %}
      </div>
    </div>
{% else %}
<div class="item-detail-wrapper">
    <div class="one">
      <img class="float-left" src="{{ post.image.url }}" style="width:100%; height: auto;">
    </div>
    <div class="two">
      <h2 class="float-right">{{ post.item }}</h2>
      
      <p>${{ post.price }}</p>
      <p class="font-weight-bold">Seller: <span >{{ post.seller }}</span></p>
      <hr>
      <ul>
        <li class="card-text">{{ post.description }}</li>
      </ul>
    </div>
    
    
    <div class="card-footer review">
        <p>Please Log in to leave a review</p>
      {% for review in post.reviews.all %}
        <p>
            <span class="font-weight-bold">
                {{ review.author }} &middot;
            </span>
            {{ review }}
        </p>
      {% endfor %}
    </div>
    <br>
    <div class="three">
      <h2 style="text-align: center;">Related Items</h2>
      <div class="card-deck">
        {% for item in related_items %}
          <div class="card post-entry" style="width: 18rem;">
              <a class="messUp" href="{% url 'post_detail' item.pk %}"><img src="{{ item.image.url }}" style="width:100%"></a>
              <div class="container">
                  <p><b>{{ item }}</b></p>
                  <p>$ {{ item.price }}</p>
                  <p> {{ item.seller }}</p>
              </div>
          </div>
        {% endfor %}
      </div>
    </div>
{% endif %}
{% endblock content %}